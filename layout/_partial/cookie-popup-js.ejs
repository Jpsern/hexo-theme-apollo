<script type="text/javascript">
(function() {
    document.addEventListener("DOMContentLoaded", function(){
        const cookiePopup = document.querySelector('.cookie-consent');
        const rejectFlag = sessionStorage.getItem('rejectFlag');
        let cookieSetFlag = false;
        const cookieDataList = document.cookie.split('; ');

        for (const cookie of cookieDataList) {
            const cookieSplit = cookie.split('=');
            if (cookieSplit[0] === 'robotama-cookie') cookieSetFlag = true;
        }

        function setCookie(){
            const cookieExpirationDays = 31;
            const current = new Date();
            expire = current.getTime() + cookieExpirationDays * 24 * 3600 * 1000;
            document.cookie = `robotama-cookie=robotama-read; expire=${expire}`;
        }

        function deleteAllCookie(){
            const maxAgeZero = 'max-age=0';

            for (const cookie of cookieDataList) {
                const cookieSplit = cookie.split('=');
                document.cookie = `${cookieSplit[0]}=; ${maxAgeZero}`;
            }
        }

        function PopupDisplay(){
            cookiePopup.classList.add('is-show');
        }

        if (!cookieSetFlag && !rejectFlag) {
            PopupDisplay();
        }

        const agreeButton = document.querySelector('.cookie-agree');
        agreeButton.addEventListener('click', ()=> {
            cookiePopup.classList.add('cc-hide2');
            SetCookie();
        });

        const rejectButton = document.querySelector('.cookie-reject');
        rejectButton.addEventListener('click', ()=> {
            cookiePopup.classList.add('cc-hide2');
            sessionStorage.setItem('rejectFlag', true);
            DeleteAllCookie();
        });
    });
}());
</script>
